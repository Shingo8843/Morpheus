"use strict";exports.id=873,exports.ids=[873,862],exports.modules={9197:(e,t,n)=>{n.r(t),n.d(t,{formatElapsedTime:()=>i,getDocumentIndexId:()=>a,getDocumentProperties:()=>o.OX,getInnerType:()=>d,getVectorSize:()=>m,isArrayType:()=>p,isGeoPointType:()=>l,isVectorType:()=>f,validateSchema:()=>s});var r=n(5815),o=n(8070);async function i(e){return{raw:Number(e),formatted:await(0,o.Ed)(e)}}async function a(e){if(e.id){if("string"!=typeof e.id)throw(0,r.T)("DOCUMENT_ID_MUST_BE_STRING",typeof e.id);return e.id}return await(0,o.EL)()}async function s(e,t){for(const[n,o]of Object.entries(t)){const t=e[n];if(void 0!==t&&("geopoint"!==o||"object"!=typeof t||"number"!=typeof t.lon||"number"!=typeof t.lat)&&("enum"!==o||"string"!=typeof t&&"number"!=typeof t))if("enum[]"===o&&Array.isArray(t)){const e=t.length;for(let r=0;r<e;r++)if("string"!=typeof t[r]&&"number"!=typeof t[r])return n+"."+r}else if(f(o)){const e=m(o);if(!Array.isArray(t)||t.length!==e)throw(0,r.T)("INVALID_INPUT_VECTOR",n,e,t.length)}else if(p(o)){if(!Array.isArray(t))return n;const e=d(o),r=t.length;for(let o=0;o<r;o++)if(typeof t[o]!==e)return n+"."+o}else if("object"!=typeof o){if(typeof t!==o)return n}else{if(!t||"object"!=typeof t)return n;const e=await s(t,o);if(e)return n+"."+e}}}const c={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},u={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function l(e){return"geopoint"===e}function f(e){return"string"==typeof e&&/^vector\[\d+\]$/.test(e)}function p(e){return"string"==typeof e&&c[e]}function d(e){return u[e]}function m(e){const t=Number(e.slice(7,-1));switch(!0){case isNaN(t):throw(0,r.T)("INVALID_VECTOR_VALUE",e);case t<=0:throw(0,r.T)("INVALID_VECTOR_SIZE",e);default:return t}}},7220:(e,t,n)=>{n.d(t,{RI:()=>o,ZI:()=>a,et:()=>c,mX:()=>s,me:()=>r,rf:()=>i});const r=["tokenizer","index","documentsStore","sorter"],o=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];async function i(e,t,n,r){const o=e.length;for(let i=0;i<o;i++)await e[i](t,n,r)}async function a(e,t,n){const r=e.length;for(let o=0;o<r;o++)await e[o](t,n)}async function s(e,t,n,r,o){const i=e.length;for(let a=0;a<i;a++)await e[a](t,n,r,o)}async function c(e,t,n,r){const o=e.length;for(let i=0;i<o;i++)await e[i](t,n,r)}},9484:(e,t,n)=>{n.d(t,{v:()=>s,_:()=>c});const r=Symbol("orama.insertions"),o=Symbol("orama.removals");var i;const a=(null===(i=globalThis.process)||void 0===i?void 0:i.emitWarning)??function(e,t){console.warn(`[WARNING] [${t.code}] ${e}`)};function s(e){"number"!=typeof e[r]&&(queueMicrotask((()=>{e[r]=void 0})),e[r]=0),e[r]>1e3?(a("Orama's insert operation is synchronous. Please avoid inserting a large number of document in a single operation in order not to block the main thread or, in alternative, please use insertMultiple.",{code:"ORAMA0001"}),e[r]=-1):e[r]>=0&&e[r]++}function c(e){"number"!=typeof e[o]&&(queueMicrotask((()=>{e[o]=void 0})),e[o]=0),e[o]>1e3?(a("Orama's remove operation is synchronous. Please avoid removing a large number of document in a single operation in order not to block the main thread, in alternative, please use updateMultiple.",{code:"ORAMA0002"}),e[o]=-1):e[o]>=0&&e[o]++}},2084:(e,t,n)=>{n.d(t,{E7:()=>o,zr:()=>r});const r={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim},o=Object.keys({arabic:"ar",armenian:"am",bulgarian:"bg",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"})},5815:(e,t,n)=>{n.d(t,{T:()=>a});var r=n(2084),o=n(8070);const i={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.\nSupported languages are:\n - ${r.E7.join("\n - ")}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.oramasearch.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:'Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.\nInput vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.',WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:'Facet doens\'t support the type "%s".',INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:"};function a(e,...t){const n=new Error((0,o.gB)(i[e]??`Unsupported Orama Error code: ${e}`,...t));return n.code=e,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(n),n}},7873:(e,t,n)=>{n.r(t),n.d(t,{innerInsertMultiple:()=>u,insert:()=>s,insertMultiple:()=>c});var r=n(9197),o=n(7220),i=n(9484),a=n(5815);async function s(e,t,n,s){const c=await e.validateSchema(t,e.schema);if(c)throw(0,a.T)("SCHEMA_VALIDATION_FAILURE",c);return async function(e,t,n,s){const{index:c,docs:u}=e.data,l=await e.getDocumentIndexId(t);if("string"!=typeof l)throw(0,a.T)("DOCUMENT_ID_MUST_BE_STRING",typeof l);if(!await e.documentsStore.store(u,l,t))throw(0,a.T)("DOCUMENT_ALREADY_EXISTS",l);const f=await e.documentsStore.count(u);s||await(0,o.rf)(e.beforeInsert,e,l,t);const p=await e.index.getSearchableProperties(c),d=await e.index.getSearchablePropertiesWithTypes(c),m=await e.getDocumentProperties(t,p);for(const[e,t]of Object.entries(m)){if(void 0===t)continue;const n=typeof t,o=d[e];if(!((0,r.isGeoPointType)(o)&&"object"==typeof t&&"number"==typeof t.lon&&"number"==typeof t.lat||(0,r.isVectorType)(o)&&Array.isArray(t)||(0,r.isArrayType)(o)&&Array.isArray(t)||!("enum"!==o&&"enum[]"!==o||"string"!==n&&"number"!==n)||n===o))throw(0,a.T)("INVALID_DOCUMENT_PROPERTY",e,o,n)}for(const t of p){var g,h,y,_;const r=m[t];if(void 0===r)continue;const o=d[t];await(null===(h=(g=e.index).beforeInsert)||void 0===h?void 0:h.call(g,e.data.index,t,l,r,o,n,e.tokenizer,f)),await e.index.insert(e.index,e.data.index,t,l,r,o,n,e.tokenizer,f),await(null===(_=(y=e.index).afterInsert)||void 0===_?void 0:_.call(y,e.data.index,t,l,r,o,n,e.tokenizer,f))}const I=await e.sorter.getSortableProperties(e.data.sorting),T=await e.sorter.getSortablePropertiesWithTypes(e.data.sorting),E=await e.getDocumentProperties(t,I);for(const t of I){const r=E[t];if(void 0===r)continue;const o=T[t];await e.sorter.insert(e.data.sorting,t,l,r,o,n)}return s||await(0,o.rf)(e.afterInsert,e,l,t),(0,i.v)(e),l}(e,t,n,s)}async function c(e,t,n,r,i,s){i||await(0,o.ZI)(e.beforeInsertMultiple,e,t);const c=t.length;for(let n=0;n<c;n++){const r=await e.validateSchema(t[n],e.schema);if(r)throw(0,a.T)("SCHEMA_VALIDATION_FAILURE",r)}return u(e,t,n,r,i,s)}async function u(e,t,n,r,i,a){n||(n=1e3),a=a||0;const c=[];return await new Promise(((o,u)=>{let l=0;setTimeout((async function f(){const p=t.slice(l*n,(l+1)*n);if(l++,!p.length)return o();for(const t of p)try{const n=await s(e,t,r,i);c.push(n)}catch(e){u(e)}setTimeout(f,a)}),a)})),i||await(0,o.ZI)(e.afterInsertMultiple,e,t),c}},8070:(e,t,n)=>{n.d(t,{EL:()=>y,Ed:()=>g,Mo:()=>A,OX:()=>E,Sf:()=>N,XN:()=>h,XO:()=>I,ZL:()=>O,eg:()=>_,gB:()=>p,hT:()=>f,td:()=>d,wf:()=>T});var r=n(5815);const o=Date.now().toString().slice(5);let i=0;const a=1024,s=BigInt(1e3),c=BigInt(1e6),u=BigInt(1e9),l=65535;function f(e,t){if(t.length<l)Array.prototype.push.apply(e,t);else for(let n=0;n<t.length;n+=l)Array.prototype.push.apply(e,t.slice(n,n+l))}function p(e,...t){return e.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,(function(...e){const n=e[e.length-1],{width:r,type:o,position:i}=n,a=i?t[Number.parseInt(i)-1]:t.shift(),s=""===r?0:Number.parseInt(r);switch(o){case"d":return a.toString().padStart(s,"0");case"f":{let e=a;const[t,n]=r.split(".").map((e=>Number.parseFloat(e)));return"number"==typeof n&&n>=0&&(e=e.toFixed(n)),"number"==typeof t&&t>=0?e.toString().padStart(s,"0"):e.toString()}case"s":return s<0?a.toString().padEnd(-s," "):a.toString().padStart(s," ");default:return a}}))}async function d(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(a));return`${parseFloat((e/Math.pow(a,r)).toFixed(n))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}`}function m(){return BigInt(Math.floor(1e6*performance.now()))}async function g(e){return"number"==typeof e&&(e=BigInt(e)),e<s?`${e}ns`:e<c?e/s+"μs":e<u?e/c+"ms":e/u+"s"}async function h(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?m():"undefined"!=typeof process&&process.release&&"node"===process.release.name||"undefined"!=typeof process&&void 0!==process.hrtime?process.hrtime.bigint():"undefined"!=typeof performance?m():BigInt(0)}async function y(){return`${o}-${i++}`}function _(e,t){return void 0===Object.hasOwn?Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0:Object.hasOwn(e,t)?e[t]:void 0}function I(e,t){return t[1]===e[1]?e[0]-t[0]:t[1]-e[1]}function T(e){if(0===e.length)return[];if(1===e.length)return e[0];for(let t=1;t<e.length;t++)if(e[t].length<e[0].length){const n=e[0];e[0]=e[t],e[t]=n}const t=new Map;for(const n of e[0])t.set(n,1);for(let n=1;n<e.length;n++){let r=0;for(const o of e[n]){const e=t.get(o);e===n&&(t.set(o,e+1),r++)}if(0===r)return[]}return e[0].filter((n=>{const r=t.get(n);return void 0!==r&&t.set(n,0),r===e.length}))}async function E(e,t){const n={},r=t.length;for(let o=0;o<r;o++){const r=t[o],i=r.split(".");let a=e;const s=i.length;for(let e=0;e<s;e++)if(a=a[i[e]],"object"==typeof a){if(null!==a&&"lat"in a&&"lon"in a&&"number"==typeof a.lat&&"number"==typeof a.lon){a=n[r]=a;break}if(!Array.isArray(a)&&null!==a&&e===s-1){a=void 0;break}}else if((null===a||"object"!=typeof a)&&e<s-1){a=void 0;break}void 0!==a&&(n[r]=a)}return n}async function N(e,t){return(await E(e,[t]))[t]}const b={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function A(e,t){const n=b[t];if(void 0===n)throw new Error((0,r.T)("INVALID_DISTANCE_SUFFIX",e).message);return e*n}function O(e,t){e.hits=e.hits.map((e=>({...e,document:{...e.document,...t.reduce(((e,t)=>{const n=t.split("."),r=n.pop();let o=e;for(const e of n)o[e]=o[e]??{},o=o[e];return o[r]=null,e}),e.document)}})))}}};
//# sourceMappingURL=873.index.js.map